const mongoose = require('mongoose')

const ticketSchema = mongoose.Schema({
    
    user: {
        type: mongoose.Schema.Types.ObjectId,
        ref: 'User'
    },
    contact: {
        type: mongoose.Schema.Types.ObjectId,
        ref: 'Contact'
    },
    tNumber:
        {type: String}
    ,
    subject:
        {type: String}
    ,
    status: {
    type: String,
    enum : ['open','answered','customer reply','on hold','in progress','closed'],
    default: 'open'
    } ,
    priority: {
        type: String,
        enum : ['Critical','Hight','Medium','Low'],
        default: 'Low'
        }
        ,
   
    isArchive :
    {type:Boolean , 
         default: false },

    department: 
        { type: mongoose.Schema.Types.ObjectId, ref: 'Departments' }
    ,
    wave: [
        { type: mongoose.Schema.Types.ObjectId, ref: 'Wave' }
    ],
})
ticketSchema.index ({ subject: 'text' })

module.exports = mongoose.model('Ticket', ticketSchema)


